[toc]

# ⭐命名

> There are only two hard things in Computer Science: cache invalidation and naming things.
> -- Phil Karlton

命名规范是代码和项目规范中最重要的内容之一，也是离每个程序员最贴近的规范。

**注意：**

- **命名规范应该根据团队自身的决议**
- 不要看到在网上别人或者源码怎么写就去模仿
- 不要和编译器，框架，三方库等等命名方式冲突
- 注意包和文件命名的大小写在不同平台的区别（win, linux, ios）
- 千万不要和**宏冲突**，宏一般为全大写

> 下方列出多个方案**仅供参考**，团队选取一种遵循即可

## 常用命名规范类型

| 方式           | 举例         |
| -------------- | ------------ |
| 小驼峰         | `redApple`   |
| 大驼峰         | `RedApple`   |
| 下划线         | `red_apple`  |
| 匈牙利命名法则 | `m_redApple` |

## 长度应该适中

|      | 过短                                   | 过长                                              |
| ---- | -------------------------------------- | ------------------------------------------------- |
| 举例 | `int a;`                               | `void Refresh_bigRoundRedWoodenChineseTable() {}` |
| 坏处 | 过短的命名一般来说就是名称的含义不明确 | 过长一般是因为耦合了太多内容，这是一种解耦的提示  |

## 缩写

命名应该清晰的表达出含义，因此不推荐使用各种缩写。

允许的缩写：

- 约定俗成
- 与项目业务相关

**约定俗成的缩写**

太多了，这里仅列举几个。

| 原单词   | 缩写  |
| -------- | ----- |
| 循环变量 | i,j,k |
| temp     | tmp   |
| value    | val   |
| object   | obj   |

## 文件

> 启动文件名为`main`。
>
> 启动函数为`main`，非特殊情况请勿随意修改。

以类文件为例：

注意点：

- 禁止出现短横线`-`
- 源文件名 != object文件名 （尽量避免大写）
  - Windows 不区分大小写
  - Linux 区分大小写

| 格式 `<路径>_<类名>` | 举例                       |
| -------------------- | -------------------------- |
| 路径小写，类名大驼峰 | `widget_set_DeviceMessage` |
| 路径小写，类名全小写 | `widget_set_devicemessage` |

**包含守卫（include guard）**

| 格式                                | 举例                                                         |
| ----------------------------------- | ------------------------------------------------------------ |
| 全大写+下划线+文件名后缀+**时间戳** | `WIDGET_SET_DEVICEMESSAGE_H_1679896661`<br />`WIDGET_SET_DEVICEMESSAGE_HPP_1679896661` |
| 乱码（只要你敢）                    | `fgGG5gs___$$25aeL36g$SDGfsA5`                               |

## namespace

> 静止在大范围内直接 `using namespace`

| 格式       | 举例                 |
| ---------- | -------------------- |
| 全小写     | namespace my_name {} |
| 首字母大写 | namespace My_Name {} |

## class & struct

大驼峰

## 函数

| 格式 （动词_具体作用作用） | 举例           | 备注           | 举例                       |
| -------------------------- | -------------- | -------------- | -------------------------- |
| 小写动词_小驼峰            | get_redApple() | 仅内部辅助作用 | private<br />匿名namespace |
| 大写动词_小驼峰            | Get_redApple() | 外部可调用     | public<br />全局           |

## 变量

在一些特殊情况允许使用`_`或`$`，请自行斟酌！

| 场景                    | 举例                       | 备注                                                        |
| ----------------------- | -------------------------- | ----------------------------------------------------------- |
| 全局                    | g_redApple                 |                                                             |
| 成员变量                | m_redApple<br />redApple_  | 请加特殊表示如`前m_`或`后缀_`便于使用时与参数和临时变量冲突 |
| 静态变量                | s_redApple                 |                                                             |
| 常量                    | k_redApple<br />c_redApple | 常量可采用大驼峰形式，枚举同理                              |
| 函数内普通变量/函数参数 | redApple                   | 注意名称覆盖问题                                            |

## 宏

注意，别于内置和框架宏冲突，造成多次展开等问题。

| 格式          | 举例                             |
| ------------- | -------------------------------- |
| 全大写+下划线 | MIN(x, y)<br />CHECK_RANGE(x, y) |

## enum

| 格式                   | 举例                                             |
| ---------------------- | ------------------------------------------------ |
| **枚举名** 大驼峰      | ColorEnum                                        |
| **枚举量** 前缀+大驼峰 | Color_Red（C语言，C++11 的enum class可不用前缀） |

枚举天然的具有并列的特点，因此推荐在再每个枚举量前加上整个枚举类型的特性。

这既可以避免枚举的重名，又可以让程序员充分利用ide的代码提示。

```cpp
enum ColorEnum {
    COLOR_Red,  // 红色
    COLOR_Blue  // 蓝色
};

enum class ColorEnum {
    Red,  // 红色
    Blue  // 蓝色
};
```

## union

- 联合体名 -> 大驼峰
- 成员 -> 小驼峰

## using和typedef

- C语言 中使用 `typedef`
- C++中使用 `using`（请不要再用`typedef`）

注意，这两者都是有作用范围的。

## 用相同类别的属性作为前缀表示

这里指的**属性**非常宽泛，见下方举例体会。

- 便于使用编辑器的时候输入首字母直接给出批量提示
- 便于明确变量类型

```cpp
// 此处以下下划线表示法为例
Button *btn_close;
Button *btn_open;

String user_name;
String user_password; 

Event *event_show;
Event *event_hide;
```

## 特殊字符说明

勿使用`$`，在部分框架中`$`涉及一些重链接性问题。

勿使用`_`开头，因为该命名方式一般用于底层库的使用和编译器的解析，因为为了防止冲突请不要以下划线开头。

## 注意

`namespace`和类都有域的概念。

两者的命名风格是否一致，需要团队决议。

```cpp
// 解释1 namespace scope_a 中有 class scope_b 定义一个对象x
// 解释2 class scope_a 中有内部类 class scope_b 定义一个对象x
scope_a::scope_b x;
```
